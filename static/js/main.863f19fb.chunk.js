(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{312:function(e,t,n){e.exports=n(590)},589:function(e,t,n){},590:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),i=n.n(c),o=n(27),s=n.n(o),u=n(50),l=n(259),f=n(260),m=n(284),p=n(261),h=n(286),g=n(19),d=n.n(g),b=n(594),E=n(285),v=n(96),x=n(176),j=n(177),O=n.n(j),y=n(18),k=n.n(y),w=n(598),D=function(e){return d()(e,"YYYY-MM-DD")},S=function(e){return Object(v.a)({},e,{timestamp:D(e.date).unix(),dmoment:D(e.date),weight:+(e.weight||0),exercise:+(e.exercise||0),measure:"TRUE"===e.measure,neck:+(e.neck||0),chest:+(e.chest||0),waist:+(e.waist||0),hip:+(e.hip||0),sleeve:+(e.sleeve||0)})},C=function(){var e=JSON.parse(localStorage.getItem("auth"));return Object(y.get)(e,"tokenObj.access_token","")},I=function(e){return function(t){return t instanceof Error?(e||w.a.error({title:"Connection Error",content:t.message}),{data:void 0,isError:!0,errMsg:t.message}):{data:t,isError:!1,errMsg:void 0}}},M=I(!0),Y=I(!1),A=function(e,t){return Object(y.find)(e,function(e){return e.dmoment.isSame(t,"day")})},L=function(e){return function(t,n){return Object(v.a)({rowId:n+2},Object(y.zipObject)(e,t))}},R="868583526084-jg9plqb23mjf393qdegg1aa0gq0tf8j4.apps.googleusercontent.com",T="https://www.googleapis.com/auth/spreadsheets",W="1btCR4YSDxAElxE_IdhhuEcwyr5vFDIcV48Il37NiQLQ",_="JTxBody",J=70,P="Jaynarol",B="https://github.com/Jaynarol/jtxbody",N="https://fb.com/akkaradech.sr",z={tokenInfo:"https://www.googleapis.com/oauth2/v3/tokeninfo",publicCsv:"https://docs.google.com/spreadsheets/d/".concat(W,"/pub?gid=0&single=true&output=csv"),getSheets:"https://sheets.googleapis.com/v4/spreadsheets/".concat(W,"/values/A1:I100000"),updateSheets:"https://sheets.googleapis.com/v4/spreadsheets/".concat(W,"/values:batchUpdate")},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O()({url:e,method:t,data:n,headers:{Authorization:"Bearer ".concat(C()),"Content-Type":"application/json"}})},q=function(){return F(z.tokenInfo).then(function(e){return e.data}).then(Y).catch(M)},G=function(){var e=Object(u.a)(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,F(z.getSheets).then(function(e){return e.data}).then(function(e){var t=e.values;t=void 0===t?[]:t;var n=Object(x.a)(t),a=n[0],r=void 0===a?[]:a;return n.slice(1).map(L(r)).map(S)}).then(Y).catch(Y);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,O.a.get(z.publicCsv).then(function(e){return e.data}).then(function(e){var t=e.split("\n"),n=Object(x.a)(t),a=n[0],r=n.slice(1),c=a.trim().split(",");return r.map(function(e){return e.trim().split(",")}).map(L(c)).map(S)}).then(Y).catch(Y);case 8:e.t0=e.sent;case 9:return n=e.t0,a=Object(y.sortBy)(n.data,["timestamp"]).filter(function(e){var t=e.weight;return(void 0===t?0:t)>0}),e.abrupt("return",Object(v.a)({},n,{data:a}));case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),K=function(e,t,n){var a=(A(e,n)||{rowId:e.length+2}).rowId;return F(z.updateSheets,"POST",{valueInputOption:"USER_ENTERED",data:[{range:"A".concat(a),majorDimension:"ROWS",values:[[n.format("YYYY-MM-DD")].concat(Object(E.a)(Object(y.values)(Object(y.pick)(t,["weight","exercise","measure","neck","chest","waist","hip","sleeve"]))))]}]}).then(function(e){return e.data}).then(Y).catch(Y)},U=n(601),Q=n(85),V=n(39),H=n(95),X=n(28),Z=n(29),$=n(592);function ee(){var e=Object(X.a)(["\n  margin: 20px 0 10px!important;\n"]);return ee=function(){return e},e}function te(){var e=Object(X.a)(["\n  width: 288px;\n  margin: 16px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  background-color: #EEE;\n"]);return te=function(){return e},e}function ne(){var e=Object(X.a)(["\n  margin: 16px;\n"]);return ne=function(){return e},e}function ae(){var e=Object(X.a)(["\n  min-height: 100vh;\n"]);return ae=function(){return e},e}function re(){var e=Object(X.a)(["\n  min-height: 100vh;\n"]);return re=function(){return e},e}function ce(){var e=Object(X.a)(["\n  height: 32px;\n  background: rgba(255, 255, 255, 0.2);\n  margin: 16px;\n  font-size: 1.5em;\n  color: lightgray;\n  text-align: center;\n"]);return ce=function(){return e},e}var ie=U.a.Content,oe=U.a.Sider,se=Z.a.div(ce()),ue=Object(Z.a)(U.a)(re()),le=Object(Z.a)(oe).attrs(function(){return{width:320}})(ae()),fe=Object(Z.a)(ie)(ne()),me=Z.a.div(te()),pe=Object(Z.a)($.a).attrs(function(){return{orientation:"center"}})(ee()),he=n(603),ge=n(596),de=function(e){return function(t){var n=A(e,t);return n?r.a.createElement(Q.a,{type:"flex",gutter:0,justify:"center"},n.exercise>0?r.a.createElement(he.a,{status:"processing"}):n.weight>0&&r.a.createElement(he.a,{color:"cadetblue"}),n.measure&&r.a.createElement(he.a,{status:"success"})):null}},be=function(e){var t=e.selectDate,n=e.selectedDate,a=e.data;return r.a.createElement(ge.a,{fullscreen:!1,value:n,onSelect:t,dateCellRender:de(a)})};function Ee(){var e=Object(X.a)(["\n  margin: 20px;\n"]);return Ee=function(){return e},e}function ve(){var e=Object(X.a)(["\n  padding-right: 10px!important;\n"]);return ve=function(){return e},e}function xe(){var e=Object(X.a)(["\n  text-align: right;\n  padding-right: 10px!important;\n"]);return xe=function(){return e},e}function je(){var e=Object(X.a)(["\n  align-items: center;\n  height: 36px;\n"]);return je=function(){return e},e}var Oe=Object(Z.a)(Q.a).attrs(function(){return{type:"flex",justify:"space-around"}})(je()),ye=Object(Z.a)(V.a).attrs(function(){return{span:8}})(xe()),ke=Object(Z.a)(V.a).attrs(function(){return{span:8}})(ve()),we=Object(Z.a)(Q.a)(Ee()),De=n(597),Se=n(599),Ce=n(593),Ie=n(289),Me=n(268),Ye=n(602),Ae=function(e){var t=e.refetchAuth,n=e.refetchData,c=e.form,i=e.data,o=e.selectedDate,l=e.isLogin,f=Object(a.useState)(!1),m=Object(Ie.a)(f,2),p=m[0],h=m[1],g=function(){var e=Object(u.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(y.get)(n,"profileObj.givenName")!==P){e.next=8;break}return localStorage.setItem("auth",JSON.stringify(Object(y.pick)(n,["profileObj","tokenObj"]))),e.next=5,t();case 5:Ye.a.success("Welcome back ".concat(P,".")),e.next=9;break;case 8:w.a.error({title:"Permission Denied",content:"I'm glad to hear that you are interested, But This area for ".concat(P," only.")});case 9:h(!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,K(i,c,o);case 3:if(a=e.sent,!a.isError){e.next=11;break}return e.next=8,t();case 8:Ye.a.info("Session timeout."),e.next=14;break;case 11:return e.next=13,n();case 13:Ye.a.success("Data successfully saved.");case 14:h(!1);case 15:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return l?r.a.createElement(H.a,{loading:p,onClick:d,icon:"save"},"Save"):r.a.createElement(Me.GoogleLogin,{clientId:R,buttonText:"Login",onRequest:function(){return h(!0)},onSuccess:g,onFailure:function(){return h(!1)},scope:T,cookiePolicy:"single_host_origin",render:function(e){return r.a.createElement(H.a,{onClick:e.onClick,loading:p,icon:"google"},"Login")}})};Ae.defaultProps={isLogin:!1};var Le=Ae,Re=function(e){var t=e.isLogin,n=e.selectedDate,c=e.data,i={weight:Object(a.useState)(0),exercise:Object(a.useState)(0),measure:Object(a.useState)(!1),neck:Object(a.useState)(0),chest:Object(a.useState)(0),waist:Object(a.useState)(0),hip:Object(a.useState)(0),sleeve:Object(a.useState)(0)},o=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){return(t||n)&&i[e][1](a)}},s=function(e){return i[e][0]};return Object(a.useEffect)(function(){var e=A(c,n);Object(y.each)(Object(y.keys)(i),function(e){return o(e,!0)("measure"!==e&&0)}),e&&Object(y.each)(Object(y.keys)(i),function(t){return o(t,!0)(e[t])})},[n,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe,null,r.a.createElement(ye,null,"Weight:"),r.a.createElement(ke,null,r.a.createElement(De.a,{min:0,max:120,step:.1,onChange:o("weight"),value:s("weight")})),r.a.createElement(V.a,{span:8},r.a.createElement(Se.a,{onChange:o("weight"),formatter:function(e){return"".concat(e," kg")},parser:function(e){return e.replace(/[^0-9.]/g,"")},min:0,max:120,step:.1,value:s("weight")}))),r.a.createElement(Oe,null,r.a.createElement(ye,null,"Exercise:"),r.a.createElement(ke,null,r.a.createElement(De.a,{min:0,max:120,step:5,onChange:o("exercise"),value:s("exercise")})),r.a.createElement(V.a,{span:8},r.a.createElement(Se.a,{onChange:o("exercise"),formatter:function(e){return"".concat(e," mins")},parser:function(e){return e.replace(/[^0-9.]/g,"")},min:0,max:120,step:5,value:s("exercise")}))),r.a.createElement(Oe,null,r.a.createElement(ye,null,"Measure:"),r.a.createElement(V.a,{span:16},r.a.createElement(Ce.a,{checkedChildren:"Yes",unCheckedChildren:"No",checked:s("measure"),onChange:o("measure")}))),s("measure")&&["neck","chest","waist","hip","sleeve"].map(function(e){return r.a.createElement(Oe,{key:e},r.a.createElement(ye,null,Object(y.capitalize)(e),":"),r.a.createElement(ke,null,r.a.createElement(De.a,{min:0,max:60,step:.1,onChange:o(e),value:s(e)})),r.a.createElement(V.a,{span:8},r.a.createElement(Se.a,{onChange:o(e),formatter:function(e){return"".concat(e,'"')},parser:function(e){return e.replace(/[^0-9.]/g,"")},min:0,max:60,step:.1,value:s(e)})))}),r.a.createElement(we,null,r.a.createElement(ye,null),r.a.createElement(V.a,{span:16},r.a.createElement(Le,Object.assign({form:k()(i).keys().chain().map(function(e){return[e,s(e)]}).fromPairs().value(),isLogin:t},e)))))};Re.defaultProps={isLogin:!1};var Te=Re,We=n(595),_e=n(15),Je=n(600);function Pe(){var e=Object(X.a)([""]);return Pe=function(){return e},e}function Be(){var e=Object(X.a)([""]);return Be=function(){return e},e}var Ne=Object(Z.a)(_e.a).attrs(function(){return{style:{color:"darkseagreen"}}})(Be()),ze=Object(Z.a)(Je.a).attrs(function(){return{valueStyle:{color:"#1890ff"}}})(Pe()),Fe=function(e){var t=e.spinning,n=e.data,a=Object(y.get)(Object(y.first)(n),"weight",0),c=Object(y.get)(Object(y.last)(n),"weight",0),i=c-a,o=a-J,s=Math.abs(i)/o*100,u=d()().endOf("day").subtract(7,"days").unix(),l=Object(y.sumBy)(n,function(e){var t=e.timestamp,n=e.exercise;return t>u?n:0}),f="caret-".concat(i<=0?"down":"up");return r.a.createElement(Q.a,{gutter:16},r.a.createElement(V.a,{span:6},r.a.createElement(We.a,{loading:t},r.a.createElement(ze,{title:"Current Weight",value:c,precision:2,prefix:r.a.createElement(Ne,{type:"more"}),suffix:"kg"}))),r.a.createElement(V.a,{span:6},r.a.createElement(We.a,{loading:t},r.a.createElement(ze,{title:"Weight Loss",value:i,precision:2,prefix:r.a.createElement(Ne,{type:f}),suffix:"kg"}))),r.a.createElement(V.a,{span:6},r.a.createElement(We.a,{loading:t},r.a.createElement(ze,{title:"Reach my Goal",value:s,precision:2,prefix:r.a.createElement(Ne,{type:"ant-design"}),suffix:"%"}))),r.a.createElement(V.a,{span:6},r.a.createElement(We.a,{loading:t},r.a.createElement(ze,{title:"Last 7d Exercise",value:l,prefix:r.a.createElement(Ne,{type:"heart"}),suffix:" mins"}))))},qe=n(38),Ge=function(e){var t=e.x,n=e.y,a=e.payload;return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(n,")")},r.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)"},d()(a.value,"YYYY-MM-DD").format("DD MMM")))},Ke=function(e){var t=e.cx,n=e.cy,a=e.payload.measure;return r.a.createElement("circle",{cx:t,cy:n,r:4,strokeWidth:1,stroke:a?"#52c41a":"#ff7300",fill:a?"#52c41a":"white"})},Ue=function(e){return function(t){return Object(y.isFinite)(t)?Object(y.round)(t,-1)+("min"===e?-10:10):0}},Qe=function(e,t){return"".concat(e," ").concat({weight:" kg",exercise:" mins"}[t])},Ve=function(e){var t=e.data,n=e.selectDate;return r.a.createElement(We.a,{style:{marginTop:16}},r.a.createElement(qe.f,{width:"95%",height:400},r.a.createElement(qe.d,{data:t,onClick:function(e){var t=e.activeLabel;t&&n(D(t))}},r.a.createElement(qe.c,{strokeDasharray:"3 3"}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorWeight",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"lightgreen",stopOpacity:.6}),r.a.createElement("stop",{offset:"95%",stopColor:"lightgreen",stopOpacity:0}))),r.a.createElement(qe.e,{verticalAlign:"top",height:36}),r.a.createElement(qe.g,{formatter:Qe}),r.a.createElement(qe.h,{dataKey:"date",height:60,tick:r.a.createElement(Ge,null)}),r.a.createElement(qe.i,{yAxisId:"left",domain:[Ue("min"),Ue("max")],label:{value:"Weight\xa0\xa0(kg)",angle:-90,position:"insideLeft"}}),r.a.createElement(qe.i,{yAxisId:"right",orientation:"right",domain:[0,120],label:{value:"Exercise\xa0(mins)",angle:90,position:"insideRight"}}),r.a.createElement(qe.a,{dataKey:"weight",yAxisId:"left",type:"monotone",stroke:"#ff7300",fill:"url(#colorWeight)",dot:r.a.createElement(Ke,null)}),r.a.createElement(qe.b,{dataKey:"exercise",yAxisId:"right",barSize:10,fill:"#1890ff"}))))},He=function(e){var t=e.selectedDate;return r.a.createElement(ue,null,r.a.createElement(U.a,null,r.a.createElement(fe,null,r.a.createElement(Fe,e),r.a.createElement(Ve,e))),r.a.createElement(le,null,r.a.createElement(se,null,r.a.createElement(Q.a,{type:"flex",justify:"space-between"},r.a.createElement(V.a,{span:16},_),r.a.createElement(V.a,{span:8},r.a.createElement(H.a,{type:"link",icon:"file",href:"https://docs.google.com/spreadsheets/d/".concat(W),target:"_blank"}),r.a.createElement(H.a,{type:"link",icon:"facebook",href:N,target:"_blank"}),r.a.createElement(H.a,{type:"link",icon:"github",href:B,target:"_blank"})))),r.a.createElement(me,null,r.a.createElement(be,e),r.a.createElement(pe,null,t.format("DD MMMM YYYY")),r.a.createElement(Te,e))))};He.defaultProps={data:[]};var Xe=He,Ze=(n(589),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={spinning:!0,isLogin:!1,selectedDate:d()(),data:[]},n.refetchAuth=Object(u.a)(s.a.mark(function e(){var t,a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:t=e.sent,a=t.data,r=(a=void 0===a?{}:a).expires_in,c=void 0===r?0:r,n.setState({isLogin:c>0});case 7:case"end":return e.stop()}},e)})),n.refetchData=Object(u.a)(s.a.mark(function e(){var t,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(n.state.isLogin);case 2:t=e.sent,a=t.data,r=void 0===a?[]:a,n.setState({data:r});case 6:case"end":return e.stop()}},e)})),n.selectDate=function(e){n.setState({selectedDate:e})},n.componentDidMount=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refetchAuth();case 2:return e.next=4,n.refetchData();case 4:n.setState({spinning:!1});case 5:case"end":return e.stop()}},e)})),n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{tip:"Fetching Data...",spinning:this.state.spinning},r.a.createElement(Xe,Object.assign({refetchAuth:this.refetchAuth,refetchData:this.refetchData,selectDate:this.selectDate},this.state)))}}]),t}(r.a.Component));i.a.render(r.a.createElement(Ze,null),document.getElementById("root"))}},[[312,1,2]]]);
//# sourceMappingURL=main.863f19fb.chunk.js.map